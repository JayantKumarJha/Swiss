# -*- coding: utf-8 -*-
"""2_Production_Dashboard.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1_3XvDnlfdfkTv9S_2V7kZCvvMS9pcWai
"""

import streamlit as st
import pandas as pd
import plotly.express as px

st.set_page_config(page_title="Production Dashboard", layout="wide")
st.title("ğŸ“Š Production Dashboard")

uploaded_file = st.file_uploader("Upload Scheduled Excel File", type="xlsx")

if uploaded_file:
    df = pd.read_excel(uploaded_file)

    if "Units Produced" not in df.columns:
        st.warning("âš ï¸ Uploaded file does not contain schedule data.")
    else:
        # Styling
        st.markdown("""
            <style>
                .metric-label { font-weight: bold; font-size: 18px; color: #2c3e50; }
                .block-container { padding-top: 1rem; }
            </style>
        """, unsafe_allow_html=True)

        st.subheader("ğŸ“Œ Key Metrics")
        col1, col2, col3 = st.columns(3)
        col1.metric("ğŸ“¦ Units Produced", f"{df['Units Produced'].sum():,}")
        col2.metric("ğŸ” Batches", df[df["Stage"] == "Produce"].shape[0])
        col3.metric("ğŸ“… Days Used", df["Date"].nunique())

        st.subheader("ğŸ“ˆ Daily Production Chart")
        daily = df[df["Stage"] == "Produce"].groupby("Date")["Units Produced"].sum().reset_index()
        fig = px.bar(daily, x="Date", y="Units Produced", title="Units Produced Per Day")
        st.plotly_chart(fig, use_container_width=True)

        st.subheader("ğŸ§¾ Full Schedule Table")
        st.dataframe(df, use_container_width=True)